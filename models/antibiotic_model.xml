<?xml version="1.0" encoding="UTF-8"?>
<sbml xmlns="http://www.sbml.org/sbml/level3/version2/core" level="3" version="2">
  <model id="adaptive_antibiotic_model" timeUnits="hour">
    <listOfUnitDefinitions>
      <unitDefinition id="per_hour">
        <listOfUnits>
          <unit kind="second" exponent="-1" scale="0" multiplier="3600"/>
        </listOfUnits>
      </unitDefinition>
      <unitDefinition id="hour">
        <listOfUnits>
          <unit kind="second" exponent="1" scale="0" multiplier="3600"/>
        </listOfUnits>
      </unitDefinition>
      <unitDefinition id="ug_per_ml">
        <listOfUnits>
          <unit kind="gram" exponent="1" scale="-6" multiplier="1"/>
          <unit kind="litre" exponent="-1" scale="-3" multiplier="1"/>
        </listOfUnits>
      </unitDefinition>
      <unitDefinition id="ml_per_h_ug">
        <listOfUnits>
          <unit kind="litre" exponent="1" scale="-3" multiplier="1"/>
          <unit kind="second" exponent="-1" scale="0" multiplier="3600"/>
          <unit kind="gram" exponent="-1" scale="-6" multiplier="1"/>
        </listOfUnits>
      </unitDefinition>
    </listOfUnitDefinitions>
    <listOfParameters>
      <parameter id="KNetgrowth" value="1" constant="false" units="per_hour"/>
      <parameter id="tvbmax" value="1" constant="true" units="dimensionless"/>
      <parameter id="Kmax" value="1" constant="false" units="per_hour"/>
      <parameter id="EC50k" value="1" constant="false" units="ug_per_ml"/>
      <parameter id="gamma" value="1" constant="false" units="dimensionless"/>
      <parameter id="beta" value="1" constant="false" units="dimensionless"/>
      <parameter id="tau" value="1" constant="false" units="ml_per_h_ug"/>
      <parameter id="alpha" value="1" constant="false" units="per_hour"/>
      <parameter id="Kdeath" value="1" constant="false" units="per_hour"/>
      <parameter id="Ksr_max" value="1" constant="false" units="per_hour"/>
      <parameter id="Drug_concentration" value="1" constant="true" units="dimensionless"/>
    </listOfParameters>
    <listOfCompartments>
      <compartment constant="false" id="P1" size="1" units="dimensionless"/>
      <compartment constant="false" id="P2" size="1" units="dimensionless"/>
      <compartment constant="false" id="Ptotal" size="1" units="dimensionless"/>

    </listOfCompartments>
    <listOfRules>
      <rateRule variable="P1">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
          <apply>
            <minus/>
            <apply>
              <times/>
              <ci> KNetgrowth </ci>
              <ci> P1 </ci>
              <apply>
                <minus/>
                <cn> 1 </cn>
                <apply>
                  <divide/>
                  <apply>
                    <plus/>
                    <ci> P1 </ci>
                    <ci> P2 </ci>
                  </apply>
                  <ci> tvbmax </ci>
                </apply>
              </apply>
            </apply>
            <apply>
              <times/>
              <apply>
                <times/>
                <apply>
                  <divide/>
                  <ci> Ksr_max </ci>
                  <ci> tvbmax </ci>
                </apply>
                <apply>
                  <plus/>
                  <ci> P1 </ci>
                  <ci> P2 </ci>
                </apply>
              </apply>
              <ci> P1 </ci>
            </apply>
            <apply>
              <divide/>
              <apply>
                <times/>
                <ci> Kmax </ci>
                <apply>
                  <minus/>
                  <cn> 1 </cn>
                  <apply>
                    <exp/>
                    <apply>
                      <times/>
                      <apply>
                        <minus/>
                        <cn> 0 </cn>
                      </apply>  
                      <ci> alpha </ci>
                    </apply>
                  </apply>  
                </apply>
                <apply>
                  <power/>
                  <ci> Drug_concentration </ci>
                  <ci> gamma </ci>
                </apply>
              </apply>
              <apply>
                <times/>
                <ci> P1 </ci>
                <apply>
                  <plus/>
                  <apply>
                    <power/>
                      <apply>
                        <times/>
                          <ci> EC50k </ci>
                          <apply>
                            <plus/>
                            <cn> 1 </cn>
                            <apply>
                              <times/>
                              <ci> beta </ci>
                              <apply>
                                <minus/>
                                <cn> 1 </cn>
                                <apply>
                                  <exp/>
                                    <apply>
                                      <times/>
                                      <apply>
                                        <minus/> 
                                        <ci> Drug_concentration </ci>
                                      </apply>
                                      <ci> tau </ci>
                                      <cn> 0 </cn>
                                    </apply>
                                </apply>    
                              </apply>
                            </apply>
                          </apply>
                      </apply>
                    <ci> gamma </ci>
                  </apply>
                  <apply>
                    <power/>
                    <ci> Drug_concentration </ci>
                    <ci> gamma </ci>
                  </apply>
                </apply>
              </apply>
            </apply>
          </apply>
        </math>
      </rateRule>
      <rateRule variable = "P2">
        <math xmlns="http://www.w3.org/1998/Math/MathML" >
          <apply>
            <minus/>
            <apply>
              <times/>
                <apply>
                  <times/>
                  <apply>
                    <divide/>
                    <ci> Ksr_max </ci>
                    <ci> tvbmax </ci>
                  </apply>
                  <apply>
                    <plus/>
                    <ci> P1 </ci>
                    <ci> P2 </ci>
                  </apply>
                </apply>
              <ci> P1 </ci>
            </apply>
            <apply>
              <times/>
              <ci> Kdeath </ci>
              <ci> P2 </ci>
            </apply>
          </apply>
        </math>  
      </rateRule>
      <assignmentRule variable = "Ptotal">
        <math xmlns="http://www.w3.org/1998/Math/MathML"> 
          <apply>
            <plus/>
            <ci> P1 </ci>
            <ci> P2 </ci>
          </apply>
        </math>  
      </assignmentRule>
    </listOfRules>
  </model>
</sbml>
